------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
function AntiPlayerExploitsCore:OnPlayerDropWeapon(_, _, entity)
    local physObject = entity:GetPhysicsObject()
    if physObject then
        physObject:EnableMotion()
    end

    timer.Simple(
        ProtectionCore.TimeUntilDroppedSWEPRemoved,
        function()
            if entity and entity:IsValid() then
                entity:Remove()
            end
        end
    )
end

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
function AntiPlayerExploitsCore:CanPlayerSwitchChar(client, character, newCharacter)
    if not client:isStaffOnDuty() then
        if ProtectionCore.OnDamageCharacterSwitchCooldown and client.LastDamaged and client.LastDamaged > CurTime() - ProtectionCore.OnDamageCharacterSwitchCooldownTimer then return false, "You took damage too recently to switch characters!" end
        if ProtectionCore.CharacterSwitchCooldown and (character:getData("loginTime", 0) + ProtectionCore.CharacterSwitchCooldownTimer) > os.time() then return false, "You are on cooldown!" end
    end

    return true
end
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------